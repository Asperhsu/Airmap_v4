{"version":3,"sources":["webpack:///./src/js/list-page.js","webpack:///./src/js/list-table.js?63c4","webpack:///./src/js/list-table.js","webpack:///./src/css/common.css","webpack:///./src/css/list.css"],"names":[],"mappings":"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","file":"list.js","sourcesContent":["require(\"expose?bsTable!./list-table\");\r\nrequire(\"css/common.css\");\r\nrequire(\"css/list.css\");\r\n\r\nmoment.locale('zh-tw');\r\nmoment.updateLocale('zh-tw', {\r\n\trelativeTime: {\r\n\t\tm : '1分鐘',\r\n\t\th : '1小時',\r\n\t\td : '1天',\r\n\t\tM : '1個月',\r\n\t\ty : '1年',\r\n\t}\r\n});\r\n\r\n\r\n\r\n$(function(){\r\n\t// siteName hashtag\r\n\tvar siteName = window.location.hash.substr(1);\t\r\n\t$(\".bsTable\").on('load-success.bs.table', function(e, data){\r\n\t\tif(siteName){\r\n\t\t\t$(\".bootstrap-table .search input\").val(siteName).trigger('keyup');\r\n\t\t}\r\n\t});\r\n\r\n\t$(\".bsTable\").on('click-row.bs.table', function(e, row, $tr){\r\n\t\tif ($tr.next().is('tr.detail-view')) {\r\n\t\t\t$(this).bootstrapTable('collapseRow', $tr.data('index'));\r\n\t\t} else {\r\n\t\t\t$(this).bootstrapTable('expandRow', $tr.data('index'));\r\n\t\t}\r\n\t});\r\n\r\n\t$(\"#filter button\").click(function(){\r\n\t\tif($(this).data('type')){\r\n\t\t\t$(\"#filter button[data-type]\").removeClass('btn-primary')\r\n\t\t\t\t.filter(this).addClass('btn-primary');\r\n\t\t}\r\n\r\n\t\tif($(this).data('group')){\r\n\t\t\t$(\"#filter button[data-group]\").removeClass('btn-success')\r\n\t\t\t\t.filter(this).addClass('btn-success');\r\n\t\t}\r\n\r\n\t\tvar type = $(\"#filter button.btn-primary[data-type]\").data('type');\r\n\t\tvar group = $(\"#filter button.btn-success[data-group]\").data('group');\r\n\t\tvar filename = type == 'valid' ? group : group + '-expire';\r\n\t\tloadDatasource(filename);\r\n\t});\r\n\r\n\tfunction loadDatasource(filename){\r\n\t\tif(!filename){ return false; }\r\n\r\n\t\t$(\"#loading\").show();\r\n\r\n\t\tvar url = \"https://datasource.airmap.asper.tw/{{filename}}.json?raw=1\";\r\n\t\turl = url.replace('{{filename}}', filename);\r\n\r\n\t\t$.getJSON(url).then(data => {\r\n\t\t\t$('#bsTable').bootstrapTable('load', data);\r\n\t\t\t$(\"#loading\").hide();\r\n\t\t});\r\n\t}\r\n\r\n\tgoogle.maps.event.addDomListener(window, \"load\", function(){\r\n\t\tvar geocoder = new google.maps.Geocoder();\r\n\t\tvar getAddr = function(lat, lng, cb){\r\n\t\t\tvar coord = new google.maps.LatLng(lat, lng);\r\n\t\t\tgeocoder.geocode({'latLng': coord }, function(results, status) {\r\n\t\t\t\tif (status === google.maps.GeocoderStatus.OK && results) {\t\r\n\t\t\t\t\tvar address = results[0].formatted_address;\r\n\r\n\t\t\t\t\tvar components = results[0].address_components;\r\n\t\t\t\t\tif( components.length > 4 ){\t\t\t\t\t\t\r\n\t\t\t\t\t\tcomponents.shift(); components.pop();\r\n\t\t\t\t\t\tvar seperate = components[components.length-1].short_name == \"TW\" ? '' : ', ';\r\n\t\t\t\t\t\taddress = components.reverse().map((component) => component.long_name).join(seperate);\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcb(address);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tcb('');\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$(\"body\").on(\"mouseover\", \"a.latlng\", function(){\r\n\t\t\tvar $el = $(this);\r\n\t\t\tvar [lat, lng] = $(this).data('latlng').split(',');\r\n\t\t\tgetAddr(lat, lng, function(addr){\r\n\t\t\t\t$el.attr('title', addr + ` (${$el.data('latlng')})` );\r\n\t\t\t});\t\t\t\r\n\t\t});\r\n\t});\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/list-page.js\n **/","module.exports = global[\"bsTable\"] = require(\"-!E:\\\\gae\\\\airmap-v4\\\\node_modules\\\\babel-loader\\\\index.js?presets[]=es2015!E:\\\\gae\\\\airmap-v4\\\\src\\\\js\\\\list-table.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/expose-loader?bsTable!./src/js/list-table.js\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = {\r\n\tformatter: {\r\n\t\tsn: function(value, row, index){\r\n\t\t\treturn 1+index;\r\n\t\t},\r\n\t\tlocation: function(value, row, index){\r\n\t\t\t// var url = \"https://www.google.com.tw/maps/place/\" + value.lat + ',' + value.lng;\r\n\t\t\tvar url = \"/@\" + value.lat + ',' + value.lng;\r\n\t\t\tvar latlng = [value.lat, value.lng].join(', ');\t\t\t\r\n\r\n\t\t\treturn [\r\n\t\t\t\t`<a href=\"${url}\" class=\"latlng\" target=\"_blank\" data-latlng=\"${latlng}\">`,\r\n\t\t\t\t'<span class=\"glyphicon glyphicon-map-marker\"></span>',\r\n\t\t\t\t'</a>'\r\n\t\t\t].join('');\r\n\t\t},\r\n\t\tdetail: function(index, row, element){\r\n\t\t\treturn [\r\n\t\t\t\t\"<div class='col-sm-6'>\",\r\n\t\t\t\tbsTable.generate.table(\"Data\", ['Index', 'Value'], row.Data),\r\n\t\t\t\t\"</div>\",\r\n\t\t\t\t\"<div class='col-sm-6'>\",\r\n\t\t\t\tbsTable.generate.table(\"RawData\", ['Index', 'Value'], row.RawData),\r\n\t\t\t\t\"</div>\",\r\n\t\t\t].join('');\r\n\t\t},\r\n\t\tupdateTime: function(time){\r\n\t\t\tvar human = moment(time).fromNow();\r\n\t\t\tvar dataTime = moment(time).format('YYYY-MM-DD HH:mm');\r\n\t\t\treturn '<span title=\"' + dataTime + '\"><span class=\"glyphicon glyphicon-time\"></span> ' + human + '</span>';\r\n\t\t},\r\n\t\tsiteName: function(name, row){\r\n\t\t\tvar url = \"/site#\" + row.SiteGroup + '$' + row.uniqueKey;\r\n\t\t\treturn \"<a href='\" + url + \"' target='_blank'><span class='glyphicon glyphicon-bookmark'></span> \" + name + \"</a>\";\r\n\t\t},\r\n\t},\r\n\tgenerate: {\r\n\t\ttable: function(title, head, body){\r\n\t\t\tvar headHtml = '<tr><th>' + head.join('</th><th>') + '</th></tr>';\r\n\t\t\t\r\n\t\t\tvar bodyHtml = '';\r\n\t\t\tfor(var index in body){\r\n\t\t\t\tvar value = body[index];\r\n\t\t\t\t// console.log(index, value);\r\n\t\t\t\tbodyHtml += [\r\n\t\t\t\t\t'<tr>',\r\n\t\t\t\t\t\t'<th>' + index + '</th>',\r\n\t\t\t\t\t\t'<td>' + value + '</td>',\r\n\t\t\t\t\t\"</tr>\"\r\n\t\t\t\t].join('');\r\n\t\t\t}\r\n\r\n\t\t\treturn [\r\n\t\t\t\t'<div class=\"panel panel-info\">',\r\n\t\t\t\t\t'<div class=\"panel-heading\">',\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t\t\"<table class='table table-striped'>\",\r\n\t\t\t\t\t\t\"<thead>\",\r\n\t\t\t\t\t\t\theadHtml,\r\n\t\t\t\t\t\t\"</thead>\",\r\n\t\t\t\t\t\t\"<tbody>\",\r\n\t\t\t\t\t\t\tbodyHtml,\r\n\t\t\t\t\t\t\"</tbody>\",\r\n\t\t\t\t\t\"</table>\",\r\n\t\t\t\t'</div>',\r\n\t\t\t].join('');\r\n\t\t}\r\n\t},\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/list-table.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/css/common.css\n ** module id = 8\n ** module chunks = 0 1 2\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/css/list.css\n ** module id = 12\n ** module chunks = 0\n **/"],"sourceRoot":""}